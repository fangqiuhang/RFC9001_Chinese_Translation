---
title: "4.4. 对端验证"
anchor: "4.4_Peer_Authentication"
weight: 440
rank: "h2"
---

The requirements for authentication depend on the application protocol that is in use. TLS provides server authentication and permits the server to request client authentication.

有关验证的要求是视正在使用的应用协议而定的。TLS提供了验证服务器的手段，并且允许服务器请求进行客户端验证。

A client MUST authenticate the identity of the server. This typically involves verification that the identity of the server is included in a certificate and that the certificate is issued by a trusted entity (see for example [RFC2818]).

客户端{{< req_level MUST >}}验证服务器的身份。这通常包含两部分验证过程，一是验证证书中包含着服务器的身份，二是验证证书是由可信任的实体签发的（有关样例详见《[RFC2818]()》）。

> Note: Where servers provide certificates for authentication, the size of the certificate chain can consume a large number of bytes. Controlling the size of certificate chains is critical to performance in QUIC as servers are limited to sending 3 bytes for every byte received prior to validating the client address; see Section 8.1 of [QUIC-TRANSPORT]. The size of a certificate chain can be managed by limiting the number of names or extensions; using keys with small public key representations, like ECDSA; or by using certificate compression [COMPRESS].

> 注意：当服务器提供用于验证的证书时，证书链的尺寸可能消耗大量字节。控制证书链的尺寸对于QUIC的性能是十分关键的，因为服务器在验证客户端地址前可发送的字节数不能超过接收到字节数的3倍；详见《[QUIC传输]()》的[第8.1章]()。证书链的尺寸是可以被控制的，为此可以限制名称或扩展的数量；使用以较短的公钥表示方法，如ECDSA，表示的密钥；或使用证书压缩（详见《[COMPRESS]()》）。

A server MAY request that the client authenticate during the handshake. A server MAY refuse a connection if the client is unable to authenticate when requested. The requirements for client authentication vary based on application protocol and deployment.

服务器{{< req_level MAY >}}在握手期间请求进行客户端验证。如果客户端在被请求验证后不能够提供证明，那么服务器{{< req_level MAY >}}拒绝这条连接。对于客户端验证的要求会基于应用协议和部署方法的不同而不同。

A server MUST NOT use post-handshake client authentication (as defined in Section 4.6.2 of [TLS13]) because the multiplexing offered by QUIC prevents clients from correlating the certificate request with the application-level event that triggered it (see [HTTP2-TLS13]). More specifically, servers MUST NOT send post-handshake TLS CertificateRequest messages, and clients MUST treat receipt of such messages as a connection error of type PROTOCOL_VIOLATION.

服务器{{< req_level MUST_NOT >}}使用握手后客户端验证（详见《[TLS13]()》的[第4.6.2章]()），因为QUIC提供的多路复用机制使得客户端不能将证书请求与触发它的应用层事件关联起来（详见《[HTTP2-TLS13]()》）。更准确地说，在握手完成后服务器{{< req_level MUST_NOT >}}发送TLS的证书请求（`CertificateRequest`）消息，并且客户端{{< req_level MUST >}}将接收到这种消息的情况视作类型为`PROTOCOL_VIOLATION`的连接错误。
