---
title: "4.6.1. 启用0-RTT"
anchor: "4.6.1_Enabling_0-RTT"
weight: 461
rank: "h3"
---

The TLS early_data extension in the NewSessionTicket message is defined to convey (in the max_early_data_size parameter) the amount of TLS 0-RTT data the server is willing to accept. QUIC does not use TLS early data. QUIC uses 0-RTT packets to carry early data. Accordingly, the max_early_data_size parameter is repurposed to hold a sentinel value 0xffffffff to indicate that the server is willing to accept QUIC 0-RTT data. To indicate that the server does not accept 0-RTT data, the early_data extension is omitted from the NewSessionTicket. The amount of data that the client can send in QUIC 0-RTT is controlled by the initial_max_data transport parameter supplied by the server.

TLS在新会话票据消息中定义的`early_data`（早期数据）扩展是为了（在`max_early_data_size`（最大早期数据尺寸）参数中）传达服务器愿意接受的TLS 0-RTT的数据量。QUIC并不使用TLS的早期数据。QUIC使用0-RTT数据包来传递早期数据。于是，`max_early_data_size`参数被重新定义，当它的值为`0xffffffff`时，意味着服务器愿意接受QUIC 0-RTT数据。想要表明服务器并不接受0-RTT数据，就要从新会话票据中省略`early_data`扩展。客户端能够在QUIC 0-RTT中发送的数据量是由服务器提供的`initial_max_data`（初始最大数据量）传输参数控制的。

Servers MUST NOT send the early_data extension with a max_early_data_size field set to any value other than 0xffffffff. A client MUST treat receipt of a NewSessionTicket that contains an early_data extension with any other value as a connection error of type PROTOCOL_VIOLATION.

若`max_early_data_size`字段的值并非`0xffffffff`，服务器{{< req_level MUST_NOT >}}发送`early_data`扩展。如果客户端收到的新会话票据中包含`early_data`扩展但是`max_early_data_size`是其他值，那么客户端{{< req_level MUST >}}将此情况视作类型为`PROTOCOL_VIOLATION`的连接错误。

A client that wishes to send 0-RTT packets uses the early_data extension in the ClientHello message of a subsequent handshake; see Section 4.2.10 of [TLS13]. It then sends application data in 0-RTT packets.

想要发送0-RTT数据包的客户端在后续握手的客户端问候消息中使用`early_data`扩展；详见《[TLS13]()》的[第4.2章]()。然后它就能在0-RTT数据包中发送应用数据。

A client that attempts 0-RTT might also provide an address validation token if the server has sent a NEW_TOKEN frame; see Section 8.1 of [QUIC-TRANSPORT].

如果服务器曾发送过**新令牌帧**，那么尝试0-RTT的客户端可能还会提供一个地址验证令牌；详见《[QUIC传输]()》的[第8.1章]()。
